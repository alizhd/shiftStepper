<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Shift Stepper: shiftStepMotor Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<h1>shiftStepMotor Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="shiftStepMotor" --><!-- doxytag: inherits="shiftDevice" -->
<p>Implementation of a 4-phase unipolar stepper motor device.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_shift_stepper_8h_source.html">ShiftStepper.h</a>&gt;</code></p>
<!-- startSectionHeader --><div class="dynheader">
Inheritance diagram for shiftStepMotor:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
 <div class="center">
  <img src="classshift_step_motor.png" usemap="#shiftStepMotor_map" alt=""/>
  <map id="shiftStepMotor_map" name="shiftStepMotor_map">
<area href="classshift_device.html" alt="shiftDevice" shape="rect" coords="0,0,93,24"/>
</map>
 </div><!-- endSectionContent --></div>

<p><a href="classshift_step_motor-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshift_step_motor.html#aee8974e1496495ce45c7b43d0b42c464">shiftStepMotor</a> (const uint8_t seqSteps, const uint8_t *sequence, const uint8_t *channels)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a <a class="el" href="classshift_step_motor.html" title="Implementation of a 4-phase unipolar stepper motor device.">shiftStepMotor</a> object.  <a href="#aee8974e1496495ce45c7b43d0b42c464"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshift_step_motor.html#a463d9926c5bb4db38cea1a5d56c2c391">incrStep</a> (int8_t dir)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Go one step in the commanded direction.  <a href="#a463d9926c5bb4db38cea1a5d56c2c391"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshift_step_motor.html#aa93008b0f0485302d0512b85e9680df1">doSteps</a> (int16_t steps, int16_t speed)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Command a move of steps steps at speed speed.  <a href="#aa93008b0f0485302d0512b85e9680df1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshift_step_motor.html#adc24feb4fba5e88460623f95f7c377e2">setSpeed</a> (int16_t speed)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set motor speed and direction.  <a href="#adc24feb4fba5e88460623f95f7c377e2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshift_step_motor.html#a04f4a1dd0f970ea4937a3171ca965604">getSpeed</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current speed.  <a href="#a04f4a1dd0f970ea4937a3171ca965604"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshift_step_motor.html#a1dcfe79646ef64dc6e97ff5488e68548">getStepsToGo</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of steps to go in the current move.  <a href="#a1dcfe79646ef64dc6e97ff5488e68548"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshift_step_motor.html#ae5f84d01eb0fd8226325aeb52ca401fb">getSeqStep</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current output switch configuration.  <a href="#ae5f84d01eb0fd8226325aeb52ca401fb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classshift_step_motor.html#a9555644f6653ecaaf66611d26dd07959">doDevTick</a> (uint8_t bytesPerBoard, uint8_t *boardBytes)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Local implementation of per timer tick behavior.  <a href="#a9555644f6653ecaaf66611d26dd07959"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Implementation of a 4-phase unipolar stepper motor device. </p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aee8974e1496495ce45c7b43d0b42c464"></a><!-- doxytag: member="shiftStepMotor::shiftStepMotor" ref="aee8974e1496495ce45c7b43d0b42c464" args="(const uint8_t seqSteps, const uint8_t *sequence, const uint8_t *channels)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">shiftStepMotor::shiftStepMotor </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"> <em>seqSteps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"> <em>sequence</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"> <em>channels</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a <a class="el" href="classshift_step_motor.html" title="Implementation of a 4-phase unipolar stepper motor device.">shiftStepMotor</a> object. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">seqSteps</td><td>The number of steps in the sequence of switch positions required to turn the motor. Typically 4 (full steps) or 8 (half steps). </td></tr>
    <tr><td class="paramname">*sequence</td><td>The array of switch positions for each step in the sequence. Bit 0 of each element of this array controls channels[0], bit 1 controls channels[1], etc. This array must have a number of elements equal to seqSteps. This array must be allocated either statically or at global scope. </td></tr>
    <tr><td class="paramname">*channels</td><td>The array of channel numbers used by the motor. Must have four elements. The order of the channels in this array determines how the members of sequence[] are interpreted. This array must be allocated either statically or at global scope. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a9555644f6653ecaaf66611d26dd07959"></a><!-- doxytag: member="shiftStepMotor::doDevTick" ref="a9555644f6653ecaaf66611d26dd07959" args="(uint8_t bytesPerBoard, uint8_t *boardBytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void shiftStepMotor::doDevTick </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"> <em>bytesPerBoard</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"> <em>boardBytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Local implementation of per timer tick behavior. </p>
<p>This function manages the per-tick behavior of a stepper motor device. It performs the following tasks:</p>
<ul>
<li>Checks whether or not it's time to make a step, based on the values of stepSpeed, lastStep, and stepsToGo</li>
<li>Writes the current switch state to the bits corresponding to the output channels in the boardBytes[] array </li>
</ul>

<p>Reimplemented from <a class="el" href="classshift_device.html#ab67731aedf33aad1b8c6dcbdbd01ecff">shiftDevice</a>.</p>

</div>
</div>
<a class="anchor" id="aa93008b0f0485302d0512b85e9680df1"></a><!-- doxytag: member="shiftStepMotor::doSteps" ref="aa93008b0f0485302d0512b85e9680df1" args="(int16_t steps, int16_t speed)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t shiftStepMotor::doSteps </td>
          <td>(</td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"> <em>steps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"> <em>speed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Command a move of steps steps at speed speed. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">steps</td><td>The number of steps to move. If this number is negative, then this function commands continuous rotation. </td></tr>
    <tr><td class="paramname">speed</td><td>The speed at which to make the move. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the error status. This feature has not been implemented, so it always returns 0 (success) </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classshift_step_motor.html#adc24feb4fba5e88460623f95f7c377e2" title="Set motor speed and direction.">shiftStepMotor::setSpeed()</a> for details on how the speed parameter works. </dd></dl>

</div>
</div>
<a class="anchor" id="ae5f84d01eb0fd8226325aeb52ca401fb"></a><!-- doxytag: member="shiftStepMotor::getSeqStep" ref="ae5f84d01eb0fd8226325aeb52ca401fb" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t shiftStepMotor::getSeqStep </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the current output switch configuration. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>a byte describing the state of the four switches that drive the stepper motor. </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classshift_step_motor.html#aee8974e1496495ce45c7b43d0b42c464" title="Creates a shiftStepMotor object.">shiftStepMotor::shiftStepMotor()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a04f4a1dd0f970ea4937a3171ca965604"></a><!-- doxytag: member="shiftStepMotor::getSpeed" ref="a04f4a1dd0f970ea4937a3171ca965604" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t shiftStepMotor::getSpeed </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the current speed. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Speed value is in the same form as the input to <a class="el" href="classshift_step_motor.html#adc24feb4fba5e88460623f95f7c377e2" title="Set motor speed and direction.">shiftStepMotor::setSpeed()</a>. It derives this from the internal representation by inverting the process described for that function. </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classshift_step_motor.html#adc24feb4fba5e88460623f95f7c377e2" title="Set motor speed and direction.">shiftStepMotor::setSpeed()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a1dcfe79646ef64dc6e97ff5488e68548"></a><!-- doxytag: member="shiftStepMotor::getStepsToGo" ref="a1dcfe79646ef64dc6e97ff5488e68548" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t shiftStepMotor::getStepsToGo </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the number of steps to go in the current move. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of steps yet to go. A negative value commands continuous rotation. </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classshift_step_motor.html#aa93008b0f0485302d0512b85e9680df1" title="Command a move of steps steps at speed speed.">shiftStepMotor::doSteps()</a>; </dd></dl>

</div>
</div>
<a class="anchor" id="a463d9926c5bb4db38cea1a5d56c2c391"></a><!-- doxytag: member="shiftStepMotor::incrStep" ref="a463d9926c5bb4db38cea1a5d56c2c391" args="(int8_t dir)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t shiftStepMotor::incrStep </td>
          <td>(</td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"> <em>dir</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Go one step in the commanded direction. </p>
<p>This function does one of three things, depending on the current state of the motor:</p>
<ul>
<li>If the motor is turning continuously (i.e. stepsToGo &lt; 0), it does nothing</li>
<li>If the motor is stopped (stepsToGo = 0), it does one step in the commanded direction</li>
<li>If the motor is in the middle of a commanded move, one step is added to the move in the commanded direction. If the move is positive and dir is positive, then one step will be added to the current move. If the move is positive and the dir is negative, one step will be subtracted for the current move.</li>
</ul>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">dir</td><td>This defines the direction in which to perform the step. If dir &gt; 0, the step is positive; if dir &lt;= 0, the step is negative. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the error status. This feature has not been implemented, so it always returns 0 (success) </dd></dl>

</div>
</div>
<a class="anchor" id="adc24feb4fba5e88460623f95f7c377e2"></a><!-- doxytag: member="shiftStepMotor::setSpeed" ref="adc24feb4fba5e88460623f95f7c377e2" args="(int16_t speed)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t shiftStepMotor::setSpeed </td>
          <td>(</td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"> <em>speed</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set motor speed and direction. </p>
<p>The most convenient way to represent the speed internally is as the number of <a class="el" href="classshift_step_motor.html#a9555644f6653ecaaf66611d26dd07959" title="Local implementation of per timer tick behavior.">doDevTick()</a> calls between steps. However, this is unwieldy to use, so this function simplifies it. __maxMotorSpeed__ defines the maximum speed, and also the number of ticks that can be skipped per step. In order to determine the number of steps to skip, this function executes the following steps:</p>
<ol type="1">
<li>Limit the speed parameter to between -__maxMotorSpeed__ and __maxMotorSpeed__</li>
<li>If speed &gt; 0 (i.e. positive sense), set stepSpeed to __maxMotorSpeed__ - speed + 1</li>
<li>If speed &lt; 0 (i.e. negative sense), set stepSpeed to -__maxMotorSpeed__ - speed - 1</li>
<li>If speed = 0 set stepSpeed to 0, i.e. no rotation</li>
</ol>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">speed</td><td>The desired motor speed; sign indicates direction. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the error status. This feature has not been implemented, so it always returns 0 (success) </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>C:/Users/Pierce/Desktop/arduino-0018/libraries/shiftStepper/<a class="el" href="_shift_stepper_8h_source.html">ShiftStepper.h</a></li>
<li>C:/Users/Pierce/Desktop/arduino-0018/libraries/shiftStepper/<a class="el" href="_shift_stepper_8cpp.html">ShiftStepper.cpp</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Dec 9 2010 20:57:05 for Shift Stepper by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
